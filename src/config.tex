\usepackage{bookmark}  % allow chapters outside of parts the toc
\usepackage{etoc}  % for local table of contents inside chapters
\usepackage{import} % for importing chapters with subdirectories
\usepackage[
  acronyms,
]{glossaries}
\usepackage{enumerate}
\usepackage[inline,shortlabels]{enumitem} % for custom enumeration labels
\usepackage{lipsum} % for dummy text
\usepackage{cleveref} % for clever references
\usepackage{threeparttable}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{wasysym}
\usepackage[
  labelfont=bf,
  skip=0.7\baselineskip,
]{caption}
\usepackage{mwe}
\usepackage{layouts}
\usepackage{pgf}
\usepackage{pgfplots}
\usepackage{subcaption}
\usepackage{float}
\usepackage{tikz}
\usepackage[edges]{forest}


\glsdisablehyper

\setlength{\headheight}{13.59999pt}

%% BIBLIOGRAPHY

\usepackage[
  hyperref,
  backend=biber,
  maxcitenames=1,
  uniquelist=true,
  % https://www.overleaf.com/learn/latex/Biblatex_bibliography_styles
  style=alphabetic
]{biblatex}

\renewcommand*{\newunitpunct}{\addcomma\space} % Virgule entre les parties d'une reference (merci a Josquin Debaz)

%\DeclareFieldFormat[article]{volume}{\textbf{#1}}  %Le numero de volume en gras
\DeclareFieldFormat[article]{number}{\textit{#1}} %Le numero dans le volume en italique
%\DeclareFieldFormat{pages}{page(s): #1} % page(s) en toutes lettres, si on veut...

% Locutions latines en italique (comme ibid, loc.cit. , etc.) Merci \`{a} Josquin Debaz
%\renewcommand{\mkibid}[1]{\emph{#1}}

% Et pour mettre le in en italique dans la ref\'{e}rence biblio (merci encore \`{a} Josquin Debaz)
\DefineBibliographyStrings{english}{%
  in = {\emph{in}}%
}


%% RESEARCH QUESTIONS

\usepackage{amsthm}

%\theoremstyle{plain}
\newtheorem{innerRQ}{RQ}
\crefname{innerRQ}{RQ}{RQs}
\Crefname{innerRQ}{RQ}{RQs}

\newenvironment{RQ}[1]
  {\renewcommand\theinnerRQ{#1}\innerRQ}
  {\endinnerRQ}

\def\changemargin#1#2{\list{}{\rightmargin#2\leftmargin#1}\item[]}
\let\endchangemargin=\endlist

\newlist{questions}{enumerate}{2}
\setlist[questions,1]{
  label={RQ\arabic*.},
  ref={RQ\arabic*},
  font=\normalshape\bfseries,
  before=\itshape,
  %after=\normalfont\mdseries\normalshape\normalsize,
  labelindent=0pt,
  leftmargin=*,
  align=left,
}
\setlist[questions,2]{
  label={\textbf{\arabic{questionsi}.\alph*.}},
  ref={\thequestionsi\alph*},
  %font=\normalshape,
  before=\normalshape\small,
  %after=\normalfont\mdseries\normalshape\normalsize,
  % font=\normalshape,
}
\crefname{questions}{question}{questions}
\Crefname{questions}{Question}{Questions}
\crefname{questionsii}{question}{questions}
\Crefname{questionsii}{Question}{Questions}

% subquestions
% environment with a parameter to refer to an existing question
\newenvironment{subquestions}[1]
  {\begin{questions}[label={\ref{#1}-\arabic*.}]}
  {\end{questions}}



%% RESEARCH QUERIES

\newlist{queries}{enumerate}{10}
\setlist[queries]{(a)}
\crefname{queriesi}{query}{queries}
\Crefname{queriesi}{Query}{Queries}

%% REFERENCES

\newcommand{\needref}{\textbf{[?]}}

%% TOCs
\newcommand{\localtoc}{
  \vspace{-9ex}
  \localtableofcontents
  \par\noindent\rule{\textwidth}{0.4pt}
}

%% Debug
\makeatletter
\newcommand{\printfontsize}[1]{{#1\the\dimexpr\f@size pt\relax}}
\makeatother

%% Matplotlib
\def\mathdefault#1{#1}\everymath=\expandafter{\the\everymath\displaystyle}
% \usepackage{fontspec}
% \makeatletter\@ifpackageloaded{underscore}{}{\usepackage[strings]{underscore}}\makeatother  


\makeatletter
\newcommand*{\preventbreak}{\vspace{\baselineskip}\par\nobreak\@afterheading}
\makeatother


%
% Properly spaced abbreviations
% Taken from the CVPR's style package (https://stackoverflow.com/a/39363004)
%
\usepackage{xspace}

% Add a period to the end of an abbreviation unless there's one
% already, then \xspace.
\makeatletter
\DeclareRobustCommand\onedot{\futurelet\@let@token\@onedot}
\def\@onedot{\ifx\@let@token.\else.\null\fi\xspace}
%
\def\eg{\emph{e.g}\onedot} \def\Eg{\emph{E.g}\onedot}
\def\ie{\emph{i.e}\onedot} \def\Ie{\emph{I.e}\onedot}
\def\cf{\emph{c.f}\onedot} \def\Cf{\emph{C.f}\onedot}
\def\etc{\emph{etc}\onedot} \def\vs{\emph{vs}\onedot}
\def\wrt{w.r.t\onedot} \def\dof{d.o.f\onedot}
\def\etal{\emph{et al}\onedot}
\makeatother
